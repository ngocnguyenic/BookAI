<?xml version="1.0" encoding="UTF-8"?>
<testsuite xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="https://maven.apache.org/surefire/maven-surefire-plugin/xsd/surefire-test-report-3.0.xsd" version="3.0" name="service.OllamaServiceTest" time="93.778" tests="3" errors="0" skipped="0" failures="1">
  <properties>
    <property name="netbeans.deploy" value="true"/>
    <property name="java.specification.version" value="21"/>
    <property name="sun.cpu.isalist" value="amd64"/>
    <property name="sun.jnu.encoding" value="Cp1252"/>
    <property name="java.class.path" value="E:\lab211_coTrang\BookAI\target\test-classes;E:\lab211_coTrang\BookAI\target\classes;C:\Users\User\.m2\repository\jakarta\platform\jakarta.jakartaee-api\10.0.0\jakarta.jakartaee-api-10.0.0.jar;C:\Users\User\.m2\repository\jakarta\platform\jakarta.jakartaee-web-api\10.0.0\jakarta.jakartaee-web-api-10.0.0.jar;C:\Users\User\.m2\repository\jakarta\servlet\jsp\jakarta.servlet.jsp-api\3.1.0\jakarta.servlet.jsp-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\faces\jakarta.faces-api\4.0.1\jakarta.faces-api-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\ws\rs\jakarta.ws.rs-api\3.1.0\jakarta.ws.rs-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\websocket\jakarta.websocket-api\2.1.0\jakarta.websocket-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\websocket\jakarta.websocket-client-api\2.1.0\jakarta.websocket-client-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\json\jakarta.json-api\2.1.0\jakarta.json-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\json\bind\jakarta.json.bind-api\3.0.0\jakarta.json.bind-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\annotation\jakarta.annotation-api\2.1.1\jakarta.annotation-api-2.1.1.jar;C:\Users\User\.m2\repository\jakarta\ejb\jakarta.ejb-api\4.0.1\jakarta.ejb-api-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\transaction\jakarta.transaction-api\2.0.1\jakarta.transaction-api-2.0.1.jar;C:\Users\User\.m2\repository\jakarta\persistence\jakarta.persistence-api\3.1.0\jakarta.persistence-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\validation\jakarta.validation-api\3.0.2\jakarta.validation-api-3.0.2.jar;C:\Users\User\.m2\repository\jakarta\interceptor\jakarta.interceptor-api\2.1.0\jakarta.interceptor-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\enterprise\jakarta.enterprise.cdi-api\4.0.1\jakarta.enterprise.cdi-api-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\enterprise\jakarta.enterprise.lang-model\4.0.1\jakarta.enterprise.lang-model-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\inject\jakarta.inject-api\2.0.1\jakarta.inject-api-2.0.1.jar;C:\Users\User\.m2\repository\jakarta\authentication\jakarta.authentication-api\3.0.0\jakarta.authentication-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\security\enterprise\jakarta.security.enterprise-api\3.0.0\jakarta.security.enterprise-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\jms\jakarta.jms-api\3.1.0\jakarta.jms-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\activation\jakarta.activation-api\2.1.0\jakarta.activation-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\mail\jakarta.mail-api\2.1.0\jakarta.mail-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\resource\jakarta.resource-api\2.1.0\jakarta.resource-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\authorization\jakarta.authorization-api\2.1.0\jakarta.authorization-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\batch\jakarta.batch-api\2.1.1\jakarta.batch-api-2.1.1.jar;C:\Users\User\.m2\repository\jakarta\servlet\jsp\jstl\jakarta.servlet.jsp.jstl-api\3.0.0\jakarta.servlet.jsp.jstl-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\servlet\jakarta.servlet-api\6.0.0\jakarta.servlet-api-6.0.0.jar;C:\Users\User\.m2\repository\jakarta\el\jakarta.el-api\5.0.0\jakarta.el-api-5.0.0.jar;C:\Users\User\.m2\repository\org\glassfish\web\jakarta.servlet.jsp.jstl\3.0.1\jakarta.servlet.jsp.jstl-3.0.1.jar;C:\Users\User\.m2\repository\com\microsoft\sqlserver\mssql-jdbc\12.4.2.jre11\mssql-jdbc-12.4.2.jre11.jar;C:\Users\User\.m2\repository\com\google\code\gson\gson\2.11.0\gson-2.11.0.jar;C:\Users\User\.m2\repository\com\google\errorprone\error_prone_annotations\2.27.0\error_prone_annotations-2.27.0.jar;C:\Users\User\.m2\repository\org\json\json\20240303\json-20240303.jar;C:\Users\User\.m2\repository\org\apache\pdfbox\pdfbox\2.0.29\pdfbox-2.0.29.jar;C:\Users\User\.m2\repository\org\apache\pdfbox\fontbox\2.0.29\fontbox-2.0.29.jar;C:\Users\User\.m2\repository\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter\5.10.1\junit-jupiter-5.10.1.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter-api\5.10.1\junit-jupiter-api-5.10.1.jar;C:\Users\User\.m2\repository\org\opentest4j\opentest4j\1.3.0\opentest4j-1.3.0.jar;C:\Users\User\.m2\repository\org\junit\platform\junit-platform-commons\1.10.1\junit-platform-commons-1.10.1.jar;C:\Users\User\.m2\repository\org\apiguardian\apiguardian-api\1.1.2\apiguardian-api-1.1.2.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter-params\5.10.1\junit-jupiter-params-5.10.1.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter-engine\5.10.1\junit-jupiter-engine-5.10.1.jar;C:\Users\User\.m2\repository\org\junit\platform\junit-platform-engine\1.10.1\junit-platform-engine-1.10.1.jar;C:\Users\User\.m2\repository\org\mockito\mockito-core\5.8.0\mockito-core-5.8.0.jar;C:\Users\User\.m2\repository\net\bytebuddy\byte-buddy\1.14.10\byte-buddy-1.14.10.jar;C:\Users\User\.m2\repository\net\bytebuddy\byte-buddy-agent\1.14.10\byte-buddy-agent-1.14.10.jar;C:\Users\User\.m2\repository\org\objenesis\objenesis\3.3\objenesis-3.3.jar;C:\Users\User\.m2\repository\org\mockito\mockito-junit-jupiter\5.8.0\mockito-junit-jupiter-5.8.0.jar;"/>
    <property name="java.vm.vendor" value="Oracle Corporation"/>
    <property name="sun.arch.data.model" value="64"/>
    <property name="user.variant" value=""/>
    <property name="exec.appArgs" value=""/>
    <property name="java.vendor.url" value="https://java.oracle.com/"/>
    <property name="user.timezone" value="Asia/Saigon"/>
    <property name="os.name" value="Windows 11"/>
    <property name="java.vm.specification.version" value="21"/>
    <property name="user.country" value="US"/>
    <property name="sun.java.launcher" value="SUN_STANDARD"/>
    <property name="sun.boot.library.path" value="C:\Program Files\Java\jdk-21\bin"/>
    <property name="sun.java.command" value="C:\Users\User\AppData\Local\Temp\surefire13850991938252601477\surefirebooter-20251113154505648_3.jar C:\Users\User\AppData\Local\Temp\surefire13850991938252601477 2025-11-13T15-45-05_521-jvmRun1 surefire-20251113154505648_1tmp surefire_0-20251113154505648_2tmp"/>
    <property name="jdk.debug" value="release"/>
    <property name="exec.vmArgs" value=""/>
    <property name="surefire.test.class.path" value="E:\lab211_coTrang\BookAI\target\test-classes;E:\lab211_coTrang\BookAI\target\classes;C:\Users\User\.m2\repository\jakarta\platform\jakarta.jakartaee-api\10.0.0\jakarta.jakartaee-api-10.0.0.jar;C:\Users\User\.m2\repository\jakarta\platform\jakarta.jakartaee-web-api\10.0.0\jakarta.jakartaee-web-api-10.0.0.jar;C:\Users\User\.m2\repository\jakarta\servlet\jsp\jakarta.servlet.jsp-api\3.1.0\jakarta.servlet.jsp-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\faces\jakarta.faces-api\4.0.1\jakarta.faces-api-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\ws\rs\jakarta.ws.rs-api\3.1.0\jakarta.ws.rs-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\websocket\jakarta.websocket-api\2.1.0\jakarta.websocket-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\websocket\jakarta.websocket-client-api\2.1.0\jakarta.websocket-client-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\json\jakarta.json-api\2.1.0\jakarta.json-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\json\bind\jakarta.json.bind-api\3.0.0\jakarta.json.bind-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\annotation\jakarta.annotation-api\2.1.1\jakarta.annotation-api-2.1.1.jar;C:\Users\User\.m2\repository\jakarta\ejb\jakarta.ejb-api\4.0.1\jakarta.ejb-api-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\transaction\jakarta.transaction-api\2.0.1\jakarta.transaction-api-2.0.1.jar;C:\Users\User\.m2\repository\jakarta\persistence\jakarta.persistence-api\3.1.0\jakarta.persistence-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\validation\jakarta.validation-api\3.0.2\jakarta.validation-api-3.0.2.jar;C:\Users\User\.m2\repository\jakarta\interceptor\jakarta.interceptor-api\2.1.0\jakarta.interceptor-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\enterprise\jakarta.enterprise.cdi-api\4.0.1\jakarta.enterprise.cdi-api-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\enterprise\jakarta.enterprise.lang-model\4.0.1\jakarta.enterprise.lang-model-4.0.1.jar;C:\Users\User\.m2\repository\jakarta\inject\jakarta.inject-api\2.0.1\jakarta.inject-api-2.0.1.jar;C:\Users\User\.m2\repository\jakarta\authentication\jakarta.authentication-api\3.0.0\jakarta.authentication-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\security\enterprise\jakarta.security.enterprise-api\3.0.0\jakarta.security.enterprise-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\jms\jakarta.jms-api\3.1.0\jakarta.jms-api-3.1.0.jar;C:\Users\User\.m2\repository\jakarta\activation\jakarta.activation-api\2.1.0\jakarta.activation-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\mail\jakarta.mail-api\2.1.0\jakarta.mail-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\resource\jakarta.resource-api\2.1.0\jakarta.resource-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\authorization\jakarta.authorization-api\2.1.0\jakarta.authorization-api-2.1.0.jar;C:\Users\User\.m2\repository\jakarta\batch\jakarta.batch-api\2.1.1\jakarta.batch-api-2.1.1.jar;C:\Users\User\.m2\repository\jakarta\servlet\jsp\jstl\jakarta.servlet.jsp.jstl-api\3.0.0\jakarta.servlet.jsp.jstl-api-3.0.0.jar;C:\Users\User\.m2\repository\jakarta\servlet\jakarta.servlet-api\6.0.0\jakarta.servlet-api-6.0.0.jar;C:\Users\User\.m2\repository\jakarta\el\jakarta.el-api\5.0.0\jakarta.el-api-5.0.0.jar;C:\Users\User\.m2\repository\org\glassfish\web\jakarta.servlet.jsp.jstl\3.0.1\jakarta.servlet.jsp.jstl-3.0.1.jar;C:\Users\User\.m2\repository\com\microsoft\sqlserver\mssql-jdbc\12.4.2.jre11\mssql-jdbc-12.4.2.jre11.jar;C:\Users\User\.m2\repository\com\google\code\gson\gson\2.11.0\gson-2.11.0.jar;C:\Users\User\.m2\repository\com\google\errorprone\error_prone_annotations\2.27.0\error_prone_annotations-2.27.0.jar;C:\Users\User\.m2\repository\org\json\json\20240303\json-20240303.jar;C:\Users\User\.m2\repository\org\apache\pdfbox\pdfbox\2.0.29\pdfbox-2.0.29.jar;C:\Users\User\.m2\repository\org\apache\pdfbox\fontbox\2.0.29\fontbox-2.0.29.jar;C:\Users\User\.m2\repository\commons-logging\commons-logging\1.2\commons-logging-1.2.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter\5.10.1\junit-jupiter-5.10.1.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter-api\5.10.1\junit-jupiter-api-5.10.1.jar;C:\Users\User\.m2\repository\org\opentest4j\opentest4j\1.3.0\opentest4j-1.3.0.jar;C:\Users\User\.m2\repository\org\junit\platform\junit-platform-commons\1.10.1\junit-platform-commons-1.10.1.jar;C:\Users\User\.m2\repository\org\apiguardian\apiguardian-api\1.1.2\apiguardian-api-1.1.2.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter-params\5.10.1\junit-jupiter-params-5.10.1.jar;C:\Users\User\.m2\repository\org\junit\jupiter\junit-jupiter-engine\5.10.1\junit-jupiter-engine-5.10.1.jar;C:\Users\User\.m2\repository\org\junit\platform\junit-platform-engine\1.10.1\junit-platform-engine-1.10.1.jar;C:\Users\User\.m2\repository\org\mockito\mockito-core\5.8.0\mockito-core-5.8.0.jar;C:\Users\User\.m2\repository\net\bytebuddy\byte-buddy\1.14.10\byte-buddy-1.14.10.jar;C:\Users\User\.m2\repository\net\bytebuddy\byte-buddy-agent\1.14.10\byte-buddy-agent-1.14.10.jar;C:\Users\User\.m2\repository\org\objenesis\objenesis\3.3\objenesis-3.3.jar;C:\Users\User\.m2\repository\org\mockito\mockito-junit-jupiter\5.8.0\mockito-junit-jupiter-5.8.0.jar;"/>
    <property name="sun.cpu.endian" value="little"/>
    <property name="user.home" value="C:\Users\User"/>
    <property name="user.language" value="en"/>
    <property name="java.specification.vendor" value="Oracle Corporation"/>
    <property name="java.version.date" value="2025-01-21"/>
    <property name="java.home" value="C:\Program Files\Java\jdk-21"/>
    <property name="file.separator" value="\"/>
    <property name="basedir" value="E:\lab211_coTrang\BookAI"/>
    <property name="java.vm.compressedOopsMode" value="Zero based"/>
    <property name="line.separator" value="&#10;"/>
    <property name="java.vm.specification.vendor" value="Oracle Corporation"/>
    <property name="java.specification.name" value="Java Platform API Specification"/>
    <property name="surefire.real.class.path" value="C:\Users\User\AppData\Local\Temp\surefire13850991938252601477\surefirebooter-20251113154505648_3.jar"/>
    <property name="user.script" value=""/>
    <property name="sun.management.compiler" value="HotSpot 64-Bit Tiered Compilers"/>
    <property name="java.runtime.version" value="21.0.6+8-LTS-188"/>
    <property name="user.name" value="User"/>
    <property name="stdout.encoding" value="Cp1252"/>
    <property name="path.separator" value=";"/>
    <property name="os.version" value="10.0"/>
    <property name="java.runtime.name" value="Java(TM) SE Runtime Environment"/>
    <property name="file.encoding" value="UTF-8"/>
    <property name="java.vm.name" value="Java HotSpot(TM) 64-Bit Server VM"/>
    <property name="maven.ext.class.path" value="C:\Program Files\NetBeans-21\netbeans\java\maven-nblib\netbeans-eventspy.jar"/>
    <property name="localRepository" value="C:\Users\User\.m2\repository"/>
    <property name="java.vendor.url.bug" value="https://bugreport.java.com/bugreport/"/>
    <property name="java.io.tmpdir" value="C:\Users\User\AppData\Local\Temp\"/>
    <property name="java.version" value="21.0.6"/>
    <property name="user.dir" value="E:\lab211_coTrang\BookAI"/>
    <property name="os.arch" value="amd64"/>
    <property name="java.vm.specification.name" value="Java Virtual Machine Specification"/>
    <property name="sun.os.patch.level" value=""/>
    <property name="native.encoding" value="Cp1252"/>
    <property name="java.library.path" value="C:\Program Files\Java\jdk-21\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\Program Files (x86)\Common Files\Oracle\Java\javapath;C:\Program Files\Common Files\Oracle\Java\javapath;C:\Program Files (x86)\Common Files\Intel\Shared Libraries\redist\intel64\compiler;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Windows\System32\OpenSSH\;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\NVIDIA Corporation\NVIDIA NvDLISR;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\WINDOWS\System32\OpenSSH\;C:\Program Files\Git\cmd;C:\Program Files\dotnet\;C:\Program Files (x86)\Microsoft SQL Server\160\Tools\Binn\;C:\Program Files\Microsoft SQL Server\160\Tools\Binn\;C:\Program Files\Microsoft SQL Server\Client SDK\ODBC\170\Tools\Binn\;C:\Program Files\Microsoft SQL Server\160\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\160\DTS\Binn\;C:\Program Files\Cloudflare\Cloudflare WARP\;C:\Users\User\AppData\Local\Programs\Python\Launcher\;C:\Users\User\AppData\Local\Programs\Eclipse Adoptium\jdk-17.0.11.9-hotspot\bin;C:\Users\User\AppData\Local\Microsoft\WindowsApps;E:\Microsoft VS Code\bin;C:\Program Files\JetBrains\IntelliJ IDEA Community Edition 2024.1.1\bin;;;C:\Users\User\AppData\Local\Programs\Ollama;."/>
    <property name="java.vm.info" value="mixed mode, sharing"/>
    <property name="stderr.encoding" value="Cp1252"/>
    <property name="java.vendor" value="Oracle Corporation"/>
    <property name="java.vm.version" value="21.0.6+8-LTS-188"/>
    <property name="sun.io.unicode.encoding" value="UnicodeLittle"/>
    <property name="java.class.version" value="65.0"/>
  </properties>
  <testcase name="testGenerateSummary" classname="service.OllamaServiceTest" time="9.15">
    <system-out><![CDATA[
======================================================================
OLLAMA SERVICE TEST
======================================================================
Start time: 2025-11-13T15:45:06.358346600


Test 1: Generate Chapter Summary...
Summary length: 639 chars
Preview: Chương 1: Máy học cơ bản (Machine Learning)

Máy học là phần của Trí tuệ nhân tạo (AI), giúp máy tín...
Time: 8789ms
]]></system-out>
    <system-err><![CDATA[Nov 13, 2025 3:45:06 PM config.ConfigAPIKey <clinit>
INFO: Config loaded successfully with 8 properties
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: faiss.server.url = http://localhost:5000
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: upload.directory = ${user.home}/BookAI/uploads
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: db.user = sa
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: db.password = 123
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: gemini.base.url = https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: gemini.api.key = AIzaSyB9lNF6nKa9aTMPXrN9lKvnPnMgV8X374E
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: ollama.flask.api.url = http://localhost:5001/chat
Nov 13, 2025 3:45:06 PM config.ConfigAPIKey lambda$static$0
INFO: Config key: db.url = jdbc:sqlserver://localhost:1433;databaseName=BookAI;encrypt=true;trustServerCertificate=true;
Nov 13, 2025 3:45:06 PM service.OllamaService <init>
INFO: Ollama Service initialized
Nov 13, 2025 3:45:06 PM service.OllamaService <init>
INFO: Flask API: http://localhost:5001/chat
Nov 13, 2025 3:45:06 PM service.OllamaService <init>
INFO: Ollama API: http://localhost:11434/api/generate
Nov 13, 2025 3:45:06 PM service.OllamaService generateChapterSummary
INFO: Generating summary for: Chương 1: Machine Learning Cơ bản
Nov 13, 2025 3:45:15 PM service.OllamaService generateChapterSummary
INFO: Summary generated in 8.8s (639 chars)
]]></system-err>
  </testcase>
  <testcase name="testGenerateMCQ" classname="service.OllamaServiceTest" time="80.425">
    <failure message="MCQ generation failed after 2 attempts: Invalid JSON from Ollama: Expected a &apos;,&apos; or &apos;]&apos; at 1401 [character 5 line 17]. Try regenerating or check Ollama output quality." type="org.opentest4j.AssertionFailedError"><![CDATA[org.opentest4j.AssertionFailedError: MCQ generation failed after 2 attempts: Invalid JSON from Ollama: Expected a ',' or ']' at 1401 [character 5 line 17]. Try regenerating or check Ollama output quality.
	at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:38)
	at org.junit.jupiter.api.Assertions.fail(Assertions.java:138)
	at service.OllamaServiceTest.testGenerateMCQ(OllamaServiceTest.java:146)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
]]></failure>
    <system-out><![CDATA[
Test 2: Generate MCQ...
Attempt 1 failed, retrying...
Attempt 2 failed, retrying...
Failed: MCQ generation failed after 2 attempts: Invalid JSON from Ollama: Expected a ',' or ']' at 1401 [character 5 line 17]. Try regenerating or check Ollama output quality.
]]></system-out>
    <system-err><![CDATA[Nov 13, 2025 3:45:15 PM service.OllamaService <init>
INFO: Ollama Service initialized
Nov 13, 2025 3:45:15 PM service.OllamaService <init>
INFO: Flask API: http://localhost:5001/chat
Nov 13, 2025 3:45:15 PM service.OllamaService <init>
INFO: Ollama API: http://localhost:11434/api/generate
Nov 13, 2025 3:45:15 PM service.OllamaService generateMCQ
INFO: Attempt 1/2 - Generating 3 MCQs...
Nov 13, 2025 3:45:27 PM service.OllamaService generateMCQ
INFO: MCQ response received in 11.7s
Nov 13, 2025 3:45:27 PM service.OllamaService parseMCQsFromJSON
SEVERE: JSON Parse Error: Expected a ',' or ']' at 1426 [character 5 line 17]
Nov 13, 2025 3:45:27 PM service.OllamaService parseMCQsFromJSON
SEVERE: Problematic JSON (first 500 chars):
Nov 13, 2025 3:45:27 PM service.OllamaService parseMCQsFromJSON
SEVERE: {
  "qas": [
    {
      "question": "Mô hình Machine Learning có dạng gì?\nA. Có nhãn và không có nhãn\nB. Có nhãn nhưng không có xử lý\nC. Không có nhãn và không có xử lý\nD. Có nhãn và có xử lý",
      "answer": "D. Có nhãn và có xử lý. Giải thích: Mô hình Machine Learning thường được chia thành 3 loại: supervised (có nhãn), unsupervised (không nhãn) và reinforcement (thưởng phạt).",
      "difficulty": "easy"
    },
    {
      "question": "Kích thước mẫu dữ liệu thường ảnh hưởng đến hiệu su
Nov 13, 2025 3:45:27 PM service.OllamaService generateMCQ
WARNING: Attempt 1 failed: Invalid JSON from Ollama: Expected a ',' or ']' at 1426 [character 5 line 17]. Try regenerating or check Ollama output quality.
Nov 13, 2025 3:45:27 PM service.OllamaService generateMCQ
INFO: Retrying in 3 seconds...
Nov 13, 2025 3:45:30 PM service.OllamaService generateMCQ
INFO: Attempt 2/2 - Generating 3 MCQs...
Nov 13, 2025 3:45:45 PM service.OllamaService generateMCQ
INFO: MCQ response received in 15.4s
Nov 13, 2025 3:45:45 PM service.OllamaService parseMCQsFromJSON
SEVERE: JSON Parse Error: Expected a ',' or ']' at 1820 [character 5 line 17]
Nov 13, 2025 3:45:45 PM service.OllamaService parseMCQsFromJSON
SEVERE: Problematic JSON (first 500 chars):
Nov 13, 2025 3:45:45 PM service.OllamaService parseMCQsFromJSON
SEVERE: {
  "qas": [
    {
      "question": "Machine Learning có thể được sử dụng cho những loại dữ liệu nào?\nA. Chỉ dữ liệu nhãn\nB. Đồng thời cả dữ liệu nhãn và không nhãn\nC. Chỉ dữ liệu không nhãn\nD. Không có dữ liệu",
      "answer": "B. Đồng thời cả dữ liệu nhãn và không nhãn. Giải thích: Machine Learning có thể được sử dụng cho cả dữ liệu nhãn và không nhãn.",
      "difficulty": "easy"
    },
    {
      "question": "Sự khác biệt chính giữa supervised và unsupervised learning là gì?\nA. Super
Nov 13, 2025 3:45:45 PM service.OllamaService generateMCQ
WARNING: Attempt 2 failed: Invalid JSON from Ollama: Expected a ',' or ']' at 1820 [character 5 line 17]. Try regenerating or check Ollama output quality.
Nov 13, 2025 3:45:45 PM service.OllamaService generateMCQ
SEVERE: Failed after 2 attempts
Nov 13, 2025 3:45:47 PM service.OllamaService generateMCQ
INFO: Attempt 1/2 - Generating 3 MCQs...
Nov 13, 2025 3:45:55 PM service.OllamaService generateMCQ
INFO: MCQ response received in 8.0s
Nov 13, 2025 3:45:55 PM service.OllamaService parseMCQsFromJSON
SEVERE: JSON Parse Error: Expected a ',' or '}' at 802 [character 3 line 13]
Nov 13, 2025 3:45:55 PM service.OllamaService parseMCQsFromJSON
SEVERE: Problematic JSON (first 500 chars):
Nov 13, 2025 3:45:55 PM service.OllamaService parseMCQsFromJSON
SEVERE: {
  "qas": [
    {
      "question": "Machine Learning gồm những loại nào?\nA. Supervised và unsupervised\nB. Reinforcement và supervised\nC. Supervised, reinforcement, và unsupervised\nD. Unsupervised và reinforcement",
      "answer": "C. Supervised, reinforcement, và unsupervised. Giải thích: ...",
      "difficulty": "medium"
    },
    {
      "question": "Nêu ra một ưu điểm của Machine Learning?\nA. Khả năng dự đoán chính xác\nB. Khả năng phân tích dữ liệu hiệu quả\nC. Khả năng học từ dữ l
Nov 13, 2025 3:45:55 PM service.OllamaService generateMCQ
WARNING: Attempt 1 failed: Invalid JSON from Ollama: Expected a ',' or '}' at 802 [character 3 line 13]. Try regenerating or check Ollama output quality.
Nov 13, 2025 3:45:55 PM service.OllamaService generateMCQ
INFO: Retrying in 3 seconds...
Nov 13, 2025 3:45:58 PM service.OllamaService generateMCQ
INFO: Attempt 2/2 - Generating 3 MCQs...
Nov 13, 2025 3:46:08 PM service.OllamaService generateMCQ
INFO: MCQ response received in 9.7s
Nov 13, 2025 3:46:08 PM service.OllamaService parseMCQsFromJSON
SEVERE: JSON Parse Error: Expected a ',' or ']' at 1108 [character 5 line 17]
Nov 13, 2025 3:46:08 PM service.OllamaService parseMCQsFromJSON
SEVERE: Problematic JSON (first 500 chars):
Nov 13, 2025 3:46:08 PM service.OllamaService parseMCQsFromJSON
SEVERE: {
  "qas": [
    {
      "question": "Đáp án nào là chính xác nhất để mô tả Machine Learning không được监督?\nA. Câu trả lời có phần thưởng\nB. Câu trả lời có phần thưởng và phạt\nC. Câu trả lời có phần thưởng nhưng không phạt\nD. Câu trả lời có cả phần thưởng và phạt",
      "answer": "B. Câu trả lời có phần thưởng và phạt. Giải thích: ...",
      "difficulty": "medium"
    },
    {
      "question": "Đáp án nào là đúng về tính chất của Machine Learning?\nA. chỉ được sử dụng trong nghiên cứu\nB. 
Nov 13, 2025 3:46:08 PM service.OllamaService generateMCQ
WARNING: Attempt 2 failed: Invalid JSON from Ollama: Expected a ',' or ']' at 1108 [character 5 line 17]. Try regenerating or check Ollama output quality.
Nov 13, 2025 3:46:08 PM service.OllamaService generateMCQ
SEVERE: Failed after 2 attempts
Nov 13, 2025 3:46:10 PM service.OllamaService generateMCQ
INFO: Attempt 1/2 - Generating 3 MCQs...
Nov 13, 2025 3:46:20 PM service.OllamaService generateMCQ
INFO: MCQ response received in 10.1s
Nov 13, 2025 3:46:20 PM service.OllamaService parseMCQsFromJSON
SEVERE: JSON Parse Error: Expected a ',' or ']' at 1164 [character 5 line 17]
Nov 13, 2025 3:46:20 PM service.OllamaService parseMCQsFromJSON
SEVERE: Problematic JSON (first 500 chars):
Nov 13, 2025 3:46:20 PM service.OllamaService parseMCQsFromJSON
SEVERE: {
  "qas": [
    {
      "question": "Machine Learning có thể được sử dụng trong phần mềm tìm kiếm của Google.\nA. Không\nB. Có\nc. Không nên\nD. Rất khó",
      "answer": "B. Có. Phần mềm tìm kiếm của Google sử dụng Machine Learning để cải thiện hiệu suất tìm kiếm.",
      "difficulty": "easy"
    },
    {
      "question": "Câu hỏi nào không phù hợp cho type supervised trong Machine Learning?\nA. Xác định hình dạng của ảnh\nB. Tự động hóa quy trình kinh doanh\nC. Phân tích dữ liệu lớn\nD. Xây 
Nov 13, 2025 3:46:20 PM service.OllamaService generateMCQ
WARNING: Attempt 1 failed: Invalid JSON from Ollama: Expected a ',' or ']' at 1164 [character 5 line 17]. Try regenerating or check Ollama output quality.
Nov 13, 2025 3:46:20 PM service.OllamaService generateMCQ
INFO: Retrying in 3 seconds...
Nov 13, 2025 3:46:23 PM service.OllamaService generateMCQ
INFO: Attempt 2/2 - Generating 3 MCQs...
Nov 13, 2025 3:46:35 PM service.OllamaService generateMCQ
INFO: MCQ response received in 12.4s
Nov 13, 2025 3:46:35 PM service.OllamaService parseMCQsFromJSON
SEVERE: JSON Parse Error: Expected a ',' or ']' at 1401 [character 5 line 17]
Nov 13, 2025 3:46:35 PM service.OllamaService parseMCQsFromJSON
SEVERE: Problematic JSON (first 500 chars):
Nov 13, 2025 3:46:35 PM service.OllamaService parseMCQsFromJSON
SEVERE: {
  "qas": [
    {
      "question": "Mô hình Machine Learning được phân loại thành 3 loại chính là gì?\nA. Supervised, Unsupervised, Reinforcement\nB. Supervised, Unsupervised, Gradient Descent\nC. Supervised, Unsupervised, Backpropagation\nD. Supervised, Unsupervised, Deep Learning",
      "answer": "A. Supervised, Unsupervised, Reinforcement. Giải thích: Mô hình này được phân loại thành ba loại chính dựa trên cách nó xử lý dữ liệu và tạo ra kết quả.",
      "difficulty": "easy"
    },
    {
 
Nov 13, 2025 3:46:35 PM service.OllamaService generateMCQ
WARNING: Attempt 2 failed: Invalid JSON from Ollama: Expected a ',' or ']' at 1401 [character 5 line 17]. Try regenerating or check Ollama output quality.
Nov 13, 2025 3:46:35 PM service.OllamaService generateMCQ
SEVERE: Failed after 2 attempts
]]></system-err>
  </testcase>
  <testcase name="testEvaluateAnswer" classname="service.OllamaServiceTest" time="4.15">
    <system-out><![CDATA[
Test 3: Evaluate User Answer...
Score: 80.0/100
Level: good
Correct: true
Feedback: Câu trả lời đúng về định nghĩa của Machine Learning. Tuy nhiên, có thể cải thiện...
Time: 4145ms
]]></system-out>
    <system-err><![CDATA[Nov 13, 2025 3:46:35 PM service.OllamaService <init>
INFO: Ollama Service initialized
Nov 13, 2025 3:46:35 PM service.OllamaService <init>
INFO: Flask API: http://localhost:5001/chat
Nov 13, 2025 3:46:35 PM service.OllamaService <init>
INFO: Ollama API: http://localhost:11434/api/generate
Nov 13, 2025 3:46:35 PM service.OllamaService evaluateUserAnswer
INFO: Evaluating user answer for difficulty: medium
Nov 13, 2025 3:46:40 PM service.OllamaService parseEvaluationResult
INFO: Evaluation completed: good (80.0/100)
]]></system-err>
  </testcase>
</testsuite>